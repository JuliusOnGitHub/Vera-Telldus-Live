<?xml version="1.0"?>
<implementation>
  <files>L_TelldusLive.lua</files>
  <startup>lug_startup</startup>
  <actionList>
    <action>
      <serviceId>urn:upnp-org:serviceId:SwitchPower1</serviceId>
      <name>SetTarget</name>
      <run>
		luup.log("SetTarget for telldus device: " .. lul_settings.newTargetValue)
		return setTarget()
      </run>
    </action>
    <action>
      <serviceId>urn:upnp-org:serviceId:Dimming1</serviceId>
      <name>SetLoadLevelTarget</name>
      <run>
		luup.log("Set dim level for telldus device: " .. lul_settings.newLoadlevelTarget)
		return setLoadLevelTarget()
      </run>
    </action>
    <action>
      <serviceId>urn:micasaverde-com:serviceId:SecuritySensor1</serviceId>
      <name>SetArmed</name>
      <run>
		luup.log("Set armed for telldus device: " .. lul_device .. " with arm value : " ..lul_settings.newArmedValue)
		return setArmed(lul_device, lul_settings)
      </run>
    </action>
	<action>
      <serviceId>urn:micasaverde-com:serviceId:HaDevice1</serviceId>
      <name>Poll</name>
      <run>
        task("Telldus sensor sync start", TASK_BUSY)
        -- Force refreshCache to get called in a Timer
        luup.call_timer("refreshCache", 1, "1", "")
      </run>
	  </action>	
  </actionList>  
</implementation>
